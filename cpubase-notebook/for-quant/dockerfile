ARG NOTEBOOK_VERSION
FROM --platform=$TARGETPLATFORM hsz1273327/data-analyse-notebook:notebook-$NOTEBOOK_VERSION as base
# RUN conda install --channel conda-forge ta-lib
USER root
COPY ta-lib-0.4.0-src.tar.gz /tmp/ta-lib-0.4.0-src.tar.gz
WORKDIR /tmp
RUN tar -xzf ta-lib-0.4.0-src.tar.gz
WORKDIR /tmp/ta-lib
RUN ./configure --prefix=/usr
RUN make
RUN make install
WORKDIR /
RUN rm /tmp
# 安装需要的库
USER ${NB_UID}
WORKDIR "${HOME}"
RUN pip --no-cache-dir install akshare
RUN pip --no-cache-dir install TA-Lib